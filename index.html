<body style="font-family: system-ui, 'Segoe UI', 'Roboto', 'Helvetica', 'Arial', sans-serif; margin: 40px; background-color: #f4f4f4;">
  <h1 style="text-align: center; color: #333;">Govee Dashboard</h1>
  <div id="sensors" style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; justify-items: center;"></div>

  <script>
    const NUM_SENSORS = 6;

    async function fetchData() {
      try {
        const response = await fetch("https://goveedatarequest.netlify.app/.netlify/functions/govee-data");
        const data = await response.json();

        const container = document.getElementById("sensors");
        container.innerHTML = "";

        for (let i = 1; i <= NUM_SENSORS; i++) {
          const sensor = data[`SENSOR_${i}`];
          if (!sensor) continue;

          const sensorDiv = document.createElement("div");
          sensorDiv.style.width = "150px";
          sensorDiv.style.height = "150px";
          sensorDiv.style.border = "3px solid white";
          sensorDiv.style.borderRadius = "10px";
          sensorDiv.style.boxShadow = "0 0 5px rgba(0,0,0,0.2)";
          sensorDiv.style.backgroundColor = "#e0e0e0";
          sensorDiv.style.display = "flex";
          sensorDiv.style.flexDirection = "column";
          sensorDiv.style.justifyContent = "center";
          sensorDiv.style.alignItems = "center";
          sensorDiv.style.textAlign = "center";
          sensorDiv.style.fontWeight = "bold";

          // split temperature into whole number and decimal
          const temp = sensor.temperature ?? "--";
          const [whole, decimal] = temp.toString().split(".");

          sensorDiv.innerHTML = `
            <div style="flex: 1; display: flex; align-items: center; justify-content: center; font-size: 2em;">
              ${whole}<span style="font-size: 1em;">.${decimal ?? '0'}Â°F</span>
            </div>
            <hr style="width: 80%; border: 1px solid #999; margin: 0;">
            <div style="flex: 1; display: flex; align-items: center; justify-content: center; font-size: 1.2em;">
              ${sensor.humidity ?? "--"}%
            </div>
          `;

          container.appendChild(sensorDiv);
        }
      } catch (err) {
        console.error("Error fetching sensor data:", err);
      }
    }

    fetchData();
    setInterval(fetchData, 60000); // refresh every 60 seconds
  </script>
</body>
